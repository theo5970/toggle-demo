(this["webpackJsonptoggle-toy"]=this["webpackJsonptoggle-toy"]||[]).push([[0],{17:function(t,e,i){},18:function(t,e,i){"use strict";i.r(e);var n=i(5),r=i.n(n),s=i(8),o=i.n(s),a=i(4),h=i(1),u=i(2),c=i(6),g=i(11),f=i(10),l=i(0),b={0:{name:"OneArrow",transform:"scale(0,0)"},1:{name:"OneArrow",transform:"scale(1.0) rotateZ(-90deg)"},2:{name:"OneArrow",transform:"scale(1.0) rotateZ(90deg)"},3:{name:"OneArrow",transform:"scale(1.0) rotateZ(180deg)"},4:{name:"OneArrow",transform:"scale(1.0) rotateZ(0deg)"},5:{name:"OneArrow",transform:"scale(1.0) rotateZ(-135deg)"},6:{name:"OneArrow",transform:"scale(1.0) rotateZ(-45deg)"},7:{name:"OneArrow",transform:"scale(1.0) rotateZ(135deg)"},8:{name:"OneArrow",transform:"scale(1.0) rotateZ(45deg)"},9:{name:"TwoArrow",transform:"scale(1.0) "},10:{name:"TwoArrow",transform:"scale(1.0) rotateZ(90deg)"},11:{name:"FourArrow",transform:"scale(1.0) "},12:{name:"TwoArrow",transform:"scale(1.0) rotateZ(45deg)"},13:{name:"TwoArrow",transform:"scale(1.0) rotateZ(-45deg)"}};var d=function(t){var e=b[t.subType],i={transform:e.transform};return Object(l.jsx)("img",{src:"./Icons/".concat(e.name,".png"),style:i})},y=function(t){var e=t.isOn?"on":"";return Object(l.jsx)("button",{className:e,onClick:function(){return t.onClick()},children:Object(l.jsx)(d,{subType:t.subType})})},w=r.a.memo(y);i(17);var v,p,m=function(t){var e=t.data.lights.slice().reverse(),i=t.data.subTypes;return Object(l.jsx)("table",{className:"toggle-grid",children:Object(l.jsx)("tbody",{children:e.map((function(n,r){return r=e.length-1-r,Object(l.jsx)("tr",{children:n.map((function(e,n){return Object(l.jsx)("td",{children:Object(l.jsx)(w,{isOn:e,subType:i[r][n],onClick:function(){return t.onButtonClick(n,r)}})},n)}))},r)}))})})},k=function(){function t(e){Object(h.a)(this,t),"number"===typeof e?(this.bytes=new Uint8Array(Math.ceil(e/8)),this.bitCount=e):e instanceof Uint8Array&&(this.bytes=new Uint8Array(e),this.bitCount=8*e.length)}return Object(u.a)(t,[{key:"length",get:function(){return this.bitCount}},{key:"copyTo",value:function(t){if(this.bytes.length>t.length)throw new Error("the length of destaination array is must be same or larger than BitArray bytes!");for(var e=0;e<this.bytes.length;e++)t[e]=this.bytes[e]}},{key:"get",value:function(t){var e=Math.floor(t/8),i=t%8;return 0!=(this.bytes[e]&1<<i)}},{key:"set",value:function(t,e){var i=Math.floor(t/8),n=t%8;e?this.bytes[i]|=1<<n:this.bytes[i]&=~(1<<n)}},{key:"toString",value:function(){for(var t=[],e=0;e<this.bytes.length;e++){for(var i=this.bytes[e],n=0;n<8&&!(8*e+n>=this.bitCount);n++){var r=i>>7&1;t.push(r),i<<=1}t.push(" ")}return t.join("")}}]),t}(),O=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){var e=t.grid;t.toggle();for(var i=0;i<e.width;i++)i!=t.pos.x&&e.get(i,t.pos.y).toggle();for(var n=0;n<e.height;n++)n!=t.pos.y&&e.get(t.pos.x,n).toggle()}}]),t}(),j=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){}}]),t}(),T=i(3),L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,t),this.x=e,this.y=i}return Object(u.a)(t,[{key:"set",value:function(e,i){e instanceof t?(this.x=e.x,this.y=e.y):(this.x=e,this.y=i)}},{key:"add",value:function(e,i){return e instanceof t?new t(this.x+e.x,this.y+e.y):new t(this.x+e,this.y+i)}},{key:"sub",value:function(e,i){return e instanceof t?new t(this.x-e.x,this.y-e.y):new t(this.x-e,this.y-i)}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e)}},{key:"clone",value:function(){return new t(this.x,this.y)}}]),t}(),A=(v={},Object(T.a)(v,1,new L(0,1)),Object(T.a)(v,2,new L(0,-1)),Object(T.a)(v,3,new L(-1,0)),Object(T.a)(v,4,new L(1,0)),Object(T.a)(v,5,new L(-1,1)),Object(T.a)(v,6,new L(1,1)),Object(T.a)(v,7,new L(-1,-1)),Object(T.a)(v,8,new L(1,-1)),v),x=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){this.doOneArrow(t,A[t.subType])}},{key:"doOneArrow",value:function(t,e){for(var i=t.grid,n=t.pos.clone();i.checkRange(n);)i.get(n).toggle(),n=n.add(e)}}]),t}(),_=(p={},Object(T.a)(p,9,new L(1,0)),Object(T.a)(p,10,new L(0,1)),Object(T.a)(p,12,new L(-1,1)),Object(T.a)(p,13,new L(-1,-1)),p),R=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){this.doTwoArrow(t,_[t.subType])}},{key:"doTwoArrow",value:function(t,e){var i=t.grid,n=t.pos.clone();for(t.toggle(),n=n.add(e);i.checkRange(n);)i.get(n).toggle(),n=n.add(e);for(n.set(t.pos),n=n.sub(e);i.checkRange(n);)i.get(n).toggle(),n=n.sub(e)}}]),t}(),D=new(function(){function t(){Object(h.a)(this,t),this.nothing=new j,this.oneArrow=new x,this.twoArrow=new R,this.fourArrow=new O}return Object(u.a)(t,[{key:"Get",value:function(t){return 0===t?this.nothing:t>=1&&t<=8?this.oneArrow:11==t?this.fourArrow:t>=9&&t<=13?this.twoArrow:void 0}}]),t}()),C=function(){function t(e){Object(h.a)(this,t),this.pos=new L,this.isOn=!1,this.grid=e}return Object(u.a)(t,[{key:"subType",get:function(){return this._subType},set:function(t){this._subType=t,this.actionFunc=D.Get(t)}},{key:"toggle",value:function(){this.isOn=!this.isOn}},{key:"action",value:function(){this.actionFunc.onClick(this)}}]),t}(),U=function(){function t(){Object(h.a)(this,t),this._buttons=new Array,this._width=0,this._height=0}return Object(u.a)(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"totalButtons",get:function(){return this._width*this._height}},{key:"get",value:function(t,e){return"number"===typeof t?this._buttons[e*this._width+t]:this._buttons[t.y*this._width+t.x]}},{key:"checkRange",value:function(t,e){return"number"===typeof t?t>=0&&t<this._width&&e>=0&&e<this._height:t.x>=0&&t.x<this._width&&t.y>=0&&t.y<this._height}},{key:"resize",value:function(t,e){var i=this._width*this._height,n=t*e;this._width=t,this._height=e;var r=n-i;if(r>0)for(var s=0;s<r;s++)this._buttons.push(new C(this));else this._buttons.splice(this._buttons.length-r,r);this.reassignPositions()}},{key:"reassignPositions",value:function(){for(var t=0,e=0;e<this._height;e++)for(var i=0;i<this._width;i++){this._buttons[t].pos=new L(i,e),t++}}},{key:"visualize",value:function(){for(var t=[],e=this._height-1;e>=0;e--){for(var i=0;i<this._width;i++){var n=this.get(i,e).isOn;t.push(n?"O":"X"),t.push(" ")}t.push("\n")}return t.join("")}},{key:"toBitArray",value:function(){for(var t=new k(this.totalButtons),e=0;e<this._buttons.length;e++)t.set(e,this._buttons[e].isOn);return t}},{key:"fromBitArray",value:function(t){for(var e=0;e<t.length;e++)this._buttons[e].isOn=t.get(e)}},{key:"countLightButtons",value:function(){for(var t=0,e=0;e<this._buttons.length;e++)this._buttons[e].isOn&&t++;return t}},{key:"setAllState",value:function(t){for(var e=0;e<this._buttons.length;e++)this._buttons[e].isOn=t}}]),t}(),B={Up:1,Down:2,Left:3,Right:4,LeftUp:5,RightUp:6,LeftDown:7,RightDown:8,BothHorizontal:9,BothVertical:10,BothHorizontalVertical:11,DoubleLeftUpRightDown:12,DoubleLeftDownRightUp:13};var M={CanPlace:function(t,e,i,n){var r=!0;t.get(e,i).subType;switch(t.get(e,i).subType=n,n){case B.Up:r=i!=t.height-1;break;case B.Down:r=0!=i;break;case B.Left:r=0!=e;break;case B.Right:r=e!=t.width-1;break;case B.LeftUp:r=0!=e&&i!=t.height-1;break;case B.RightUp:r=e!=t.width-1&&i!=t.height-1;break;case B.LeftDown:r=0!=e&&0!=i;break;case B.RightDown:r=e!=t.width-1&&0!=i;break;case B.DoubleLeftDownRightUp:r=0==(e==t.width-1&&0==i),r&=0==(0==e&&i==t.height-1);break;case B.DoubleLeftUpRightDown:r=0==(0==e&&0==i),r&=0==(e==t.width-1&&i==t.height-1)}return r&&(r&=function(t,e,i){var n=!0;switch(t.get(e,i).subType){case B.Left:case B.Right:case B.BothHorizontal:n=function(t,e){var i=t.get(0,e).subType===B.Right,n=t.get(t.width-1,e).subType===B.Left;if(i&&n)return!1;for(var r=!0,s=0,o=0;o<t.width;o++){if(t.get(o,e).subType===B.BothHorizontal&&++s>=2){r=!1;break}}if(i||n||s>0)for(var a=1;a<t.width;a++){var h=t.get(a-1,e),u=t.get(a,e);if(h.subType==B.Left&&u.subType==B.Right){r=!1;break}}s>0&&(i||n)&&(r=!1);return r}(t,i);break;case B.Up:case B.Down:case B.BothVertical:n=function(t,e){var i=t.get(e,0).subType===B.Up,n=t.get(e,t.height-1).subType===B.Down;if(i&&n)return!1;for(var r=!0,s=0,o=0;o<t.height;o++){if(t.get(e,o).subType===B.BothVertical&&++s>=2){r=!1;break}}if(i||n||s>0)for(var a=1;a<t.height;a++){var h=t.get(e,a-1),u=t.get(e,a);if(h.subType==B.Up&&u.subType==B.Down){r=!1;break}}s>0&&(i||n)&&(r=!1);return r}(t,e);break;case B.LeftDown:case B.RightUp:case B.DoubleLeftDownRightUp:n=function(t,e,i){var n=new L(e,i),r=n.clone(),s=new L(1,1);for(;t.checkRange(n.sub(s));)n=n.sub(s);for(;t.checkRange(r.add(s));)r=r.add(s);var o=r.x-n.x+1,a=t.get(n).subType===B.RightUp,h=t.get(r).subType===B.LeftDown;if(a&&h)return!1;for(var u=0,c=!0,g=n.clone(),f=0;f<o;f++){if(t.get(g).subType===B.DoubleLeftDownRightUp&&++u>=2){c=!1;break}g=g.add(s)}if(a||h||u>0)for(var l=1;l<o;l++){var b=t.get(n.add(s.mul(l-1))),d=t.get(n.add(s.mul(l)));if(b.subType==B.LeftDown&&d.subType==B.RightUp){c=!1;break}}u>0&&(a||h)&&(c=!1);return c}(t,e,i);break;case B.LeftUp:case B.RightDown:case B.DoubleLeftUpRightDown:n=function(t,e,i){var n=new L(e,i),r=n.clone(),s=new L(1,-1);for(;t.checkRange(n.sub(s));)n=n.sub(s);for(;t.checkRange(r.add(s));)r=r.add(s);var o=r.x-n.x+1,a=t.get(n).subType===B.RightUp,h=t.get(r).subType===B.LeftDown;if(a&&h)return!1;for(var u=0,c=!0,g=n.clone(),f=0;f<o;f++){if(t.get(g).subType===B.DoubleLeftDownRightUp&&++u>=2){c=!1;break}g=g.add(s)}if(a||h||u>0)for(var l=1;l<o;l++){var b=t.get(n.add(s.mul(l-1))),d=t.get(n.add(s.mul(l)));b.subType==B.LeftDown&&d.subType==B.RightUp&&(c=!1)}u>0&&(a||h)&&(c=!1);return c}(t,e,i)}return n}(t,e,i)),t.get(e,i).subType=n,r}},F=function(t){return Math.floor(Math.random()*t)},S=function(t){Object(g.a)(i,t);var e=Object(f.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).grid=new U,n.difficulty=0,n.isCleared=!1,n.undoList=[],n.grid.resize(5,5),n.generateRandomMap(),n.state={lights:n.copyLightsFromGrid(),subTypes:n.copySubTypesFromGrid(),score:0,time:0},setInterval(n.increaseTime.bind(Object(c.a)(n)),1e3),n}return Object(u.a)(i,[{key:"increaseTime",value:function(){this.state.score>0&&this.setState(Object(a.a)(Object(a.a)({},this.state),{},{time:this.state.time+1}))}},{key:"undo",value:function(){if(!(this.undoList.length<=0||!0===this.isCleared)){var t=this.undoList.pop();this.grid.fromBitArray(t),this.setState(Object(a.a)(Object(a.a)({},this.state),{},{lights:this.copyLightsFromGrid()}))}}},{key:"restart",value:function(){if(!(this.undoList.length<=0||!0===this.isCleared)){var t=this.undoList[0];this.grid.fromBitArray(t),this.undoList.length=0,this.setState(Object(a.a)(Object(a.a)({},this.state),{},{lights:this.copyLightsFromGrid()}))}}},{key:"generateRandomMap",value:function(){for(var t=0,e=0;e<this.grid.height;e++)for(var i=0;i<this.grid.width;i++){var n=Math.floor(14*Math.random());do{(n=Math.floor(14*Math.random()))===B.BothHorizontalVertical&&t++}while(!M.CanPlace(this.grid,i,e,n)||n===B.BothHorizontalVertical&&t>=2);this.grid.get(i,e).subType=n}var r,s,o,a=(r=this.difficulty/100*13,s=1,o=13,Math.min(Math.max(r,s),o));this.randomClick(a)}},{key:"randomClick",value:function(t){for(var e=[],i=0;i<t;i++){var n=void 0;do{n=new L(F(this.grid.width),F(this.grid.height))}while(0===this.grid.get(n).subType||e.includes(n));this.grid.get(n).action(),e.push(n)}}},{key:"copyLightsFromGrid",value:function(){for(var t=new Array(this.grid.height),e=0;e<this.grid.height;e++){t[e]=new Array(this.grid.width);for(var i=0;i<this.grid.width;i++)t[e][i]=this.grid.get(i,e).isOn}return t}},{key:"copySubTypesFromGrid",value:function(){for(var t=new Array(this.grid.height),e=0;e<this.grid.height;e++){t[e]=new Array(this.grid.width);for(var i=0;i<this.grid.width;i++)t[e][i]=this.grid.get(i,e).subType}return t}},{key:"buttonAction",value:function(t,e){var i=this;if(!0!==this.isCleared){this.undoList.push(this.grid.toBitArray()),this.grid.get(t,e).action();var n=this.copyLightsFromGrid();this.setState(Object(a.a)(Object(a.a)({},this.state),{},{lights:n})),0===this.grid.countLightButtons()&&(this.isCleared=!0,setTimeout((function(){return i.clearMap()}),300))}}},{key:"clearMap",value:function(){this.isCleared=!1;var t=this.state.score+100*(1+this.difficulty/10);this.difficulty++,this.undoList.length=0,this.generateRandomMap(),this.setState(Object(a.a)(Object(a.a)({},this.state),{},{score:t,subTypes:this.copySubTypesFromGrid(),lights:this.copyLightsFromGrid()}))}},{key:"render",value:function(){var t=this;return Object(l.jsxs)("div",{className:"window",children:[Object(l.jsxs)("div",{className:"window-title",children:["Toggle Demo | Score: ",this.state.score," | Time: ",this.state.time,"s"]}),Object(l.jsxs)("div",{className:"window-content",children:[Object(l.jsx)("p",{children:"\ubaa8\ub4e0 \ubc84\ud2bc\uc744 \ub044\uc2ed\uc2dc\uc624. Turn off all buttons."}),Object(l.jsx)("button",{className:"btn",onClick:function(){return t.undo()},disabled:0===this.undoList.length,children:"Undo"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return t.restart()},children:"Restart"}),Object(l.jsx)(m,{data:this.state,onButtonClick:function(e,i){return t.buttonAction(e,i)}})]})]})}}]),i}(r.a.Component),G=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,19)).then((function(e){var i=e.getCLS,n=e.getFID,r=e.getFCP,s=e.getLCP,o=e.getTTFB;i(t),n(t),r(t),s(t),o(t)}))},Z=i(9);i.n(Z)()(),o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(S,{})}),document.getElementById("root")),G()}},[[18,1,2]]]);