(this["webpackJsonptoggle-toy"]=this["webpackJsonptoggle-toy"]||[]).push([[0],{17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var i=n(4),r=n.n(i),o=n(8),s=n.n(o),a=n(5),h=n(1),u=n(2),c=n(6),g=n(11),f=n(10),b=n(0),l={0:{name:"OneArrow",transform:"scale(0,0)"},1:{name:"OneArrow",transform:"rotateZ(-90deg)"},2:{name:"OneArrow",transform:"rotateZ(90deg)"},3:{name:"OneArrow",transform:"rotateZ(180deg)"},4:{name:"OneArrow",transform:"rotateZ(0deg)"},5:{name:"OneArrow",transform:"rotateZ(-135deg)"},6:{name:"OneArrow",transform:"rotateZ(-45deg)"},7:{name:"OneArrow",transform:"rotateZ(135deg)"},8:{name:"OneArrow",transform:"rotateZ(45deg)"},9:{name:"TwoArrow",transform:""},10:{name:"TwoArrow",transform:"rotateZ(90deg)"},11:{name:"FourArrow",transform:""},12:{name:"TwoArrow",transform:"rotateZ(45deg)"},13:{name:"TwoArrow",transform:"rotateZ(-45deg)"}};var d=function(t){var e=l[t.subType],n={transform:e.transform};return Object(b.jsx)("img",{src:"./Icons/".concat(e.name,".png"),style:n})},y=function(t){var e=t.isOn?"on":"";return Object(b.jsx)("button",{className:e,onClick:function(){return t.onClick()},children:Object(b.jsx)(d,{subType:t.subType})})},w=r.a.memo(y);n(17);var v,p,k=function(t){var e=t.data.lights.slice().reverse(),n=t.data.subTypes;return Object(b.jsx)("table",{className:"toggle-grid",children:Object(b.jsx)("tbody",{children:e.map((function(i,r){return r=e.length-1-r,Object(b.jsx)("tr",{children:i.map((function(e,i){return Object(b.jsx)("td",{children:Object(b.jsx)(w,{isOn:e,subType:n[r][i],onClick:function(){return t.onButtonClick(i,r)}})},i)}))},r)}))})})},m=function(){function t(e){Object(h.a)(this,t),"number"===typeof e?(this.bytes=new Uint8Array(Math.ceil(e/8)),this.bitCount=e):e instanceof Uint8Array&&(this.bytes=new Uint8Array(e),this.bitCount=8*e.length)}return Object(u.a)(t,[{key:"length",get:function(){return this.bitCount}},{key:"copyTo",value:function(t){if(this.bytes.length>t.length)throw new Error("the length of destaination array is must be same or larger than BitArray bytes!");for(var e=0;e<this.bytes.length;e++)t[e]=this.bytes[e]}},{key:"get",value:function(t){var e=Math.floor(t/8),n=t%8;return 0!=(this.bytes[e]&1<<n)}},{key:"set",value:function(t,e){var n=Math.floor(t/8),i=t%8;e?this.bytes[n]|=1<<i:this.bytes[n]&=~(1<<i)}},{key:"toString",value:function(){for(var t=[],e=0;e<this.bytes.length;e++){for(var n=this.bytes[e],i=0;i<8&&!(8*e+i>=this.bitCount);i++){var r=n>>7&1;t.push(r),n<<=1}t.push(" ")}return t.join("")}}]),t}(),O=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){var e=t.grid;t.toggle();for(var n=0;n<e.width;n++)n!=t.pos.x&&e.get(n,t.pos.y).toggle();for(var i=0;i<e.height;i++)i!=t.pos.y&&e.get(t.pos.x,i).toggle()}}]),t}(),j=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){}}]),t}(),T=n(3),A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,t),this.x=e,this.y=n}return Object(u.a)(t,[{key:"set",value:function(e,n){e instanceof t?(this.x=e.x,this.y=e.y):(this.x=e,this.y=n)}},{key:"add",value:function(e,n){return e instanceof t?new t(this.x+e.x,this.y+e.y):new t(this.x+e,this.y+n)}},{key:"sub",value:function(e,n){return e instanceof t?new t(this.x-e.x,this.y-e.y):new t(this.x-e,this.y-n)}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e)}},{key:"clone",value:function(){return new t(this.x,this.y)}}]),t}(),x=(v={},Object(T.a)(v,1,new A(0,1)),Object(T.a)(v,2,new A(0,-1)),Object(T.a)(v,3,new A(-1,0)),Object(T.a)(v,4,new A(1,0)),Object(T.a)(v,5,new A(-1,1)),Object(T.a)(v,6,new A(1,1)),Object(T.a)(v,7,new A(-1,-1)),Object(T.a)(v,8,new A(1,-1)),v),_=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){this.doOneArrow(t,x[t.subType])}},{key:"doOneArrow",value:function(t,e){for(var n=t.grid,i=t.pos.clone();n.checkRange(i);)n.get(i).toggle(),i=i.add(e)}}]),t}(),R=(p={},Object(T.a)(p,9,new A(1,0)),Object(T.a)(p,10,new A(0,1)),Object(T.a)(p,12,new A(-1,1)),Object(T.a)(p,13,new A(-1,-1)),p),D=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){this.doTwoArrow(t,R[t.subType])}},{key:"doTwoArrow",value:function(t,e){var n=t.grid,i=t.pos.clone();for(t.toggle(),i=i.add(e);n.checkRange(i);)n.get(i).toggle(),i=i.add(e);for(i.set(t.pos),i=i.sub(e);n.checkRange(i);)n.get(i).toggle(),i=i.sub(e)}}]),t}(),L=new(function(){function t(){Object(h.a)(this,t),this.nothing=new j,this.oneArrow=new _,this.twoArrow=new D,this.fourArrow=new O}return Object(u.a)(t,[{key:"Get",value:function(t){return 0===t?this.nothing:t>=1&&t<=8?this.oneArrow:11==t?this.fourArrow:t>=9&&t<=13?this.twoArrow:void 0}}]),t}()),U=function(){function t(e){Object(h.a)(this,t),this.pos=new A,this.isOn=!1,this.grid=e}return Object(u.a)(t,[{key:"subType",get:function(){return this._subType},set:function(t){this._subType=t,this.actionFunc=L.Get(t)}},{key:"toggle",value:function(){this.isOn=!this.isOn}},{key:"action",value:function(){this.actionFunc.onClick(this)}}]),t}(),C=function(){function t(){Object(h.a)(this,t),this._buttons=new Array,this._width=0,this._height=0}return Object(u.a)(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"totalButtons",get:function(){return this._width*this._height}},{key:"get",value:function(t,e){return"number"===typeof t?this._buttons[e*this._width+t]:this._buttons[t.y*this._width+t.x]}},{key:"checkRange",value:function(t,e){return"number"===typeof t?t>=0&&t<this._width&&e>=0&&e<this._height:t.x>=0&&t.x<this._width&&t.y>=0&&t.y<this._height}},{key:"resize",value:function(t,e){var n=this._width*this._height,i=t*e;this._width=t,this._height=e;var r=i-n;if(r>0)for(var o=0;o<r;o++)this._buttons.push(new U(this));else this._buttons.splice(this._buttons.length-r,r);this.reassignPositions()}},{key:"reassignPositions",value:function(){for(var t=0,e=0;e<this._height;e++)for(var n=0;n<this._width;n++){this._buttons[t].pos=new A(n,e),t++}}},{key:"visualize",value:function(){for(var t=[],e=this._height-1;e>=0;e--){for(var n=0;n<this._width;n++){var i=this.get(n,e).isOn;t.push(i?"O":"X"),t.push(" ")}t.push("\n")}return t.join("")}},{key:"toBitArray",value:function(){for(var t=new m(this.totalButtons),e=0;e<this._buttons.length;e++)t.set(e,this._buttons[e].isOn);return t}},{key:"fromBitArray",value:function(t){for(var e=0;e<t.length;e++)this._buttons[e].isOn=t.get(e)}},{key:"countLightButtons",value:function(){for(var t=0,e=0;e<this._buttons.length;e++)this._buttons[e].isOn&&t++;return t}},{key:"setAllState",value:function(t){for(var e=0;e<this._buttons.length;e++)this._buttons[e].isOn=t}}]),t}(),B={Up:1,Down:2,Left:3,Right:4,LeftUp:5,RightUp:6,LeftDown:7,RightDown:8,BothHorizontal:9,BothVertical:10,BothHorizontalVertical:11,DoubleLeftUpRightDown:12,DoubleLeftDownRightUp:13};var M={CanPlace:function(t,e,n,i){var r=!0;t.get(e,n).subType;switch(t.get(e,n).subType=i,i){case B.Up:r=n!=t.height-1;break;case B.Down:r=0!=n;break;case B.Left:r=0!=e;break;case B.Right:r=e!=t.width-1;break;case B.LeftUp:r=0!=e&&n!=t.height-1;break;case B.RightUp:r=e!=t.width-1&&n!=t.height-1;break;case B.LeftDown:r=0!=e&&0!=n;break;case B.RightDown:r=e!=t.width-1&&0!=n;break;case B.DoubleLeftDownRightUp:r=0==(e==t.width-1&&0==n),r&=0==(0==e&&n==t.height-1);break;case B.DoubleLeftUpRightDown:r=0==(0==e&&0==n),r&=0==(e==t.width-1&&n==t.height-1)}return r&&(r&=function(t,e,n){var i=!0;switch(t.get(e,n).subType){case B.Left:case B.Right:case B.BothHorizontal:i=function(t,e){var n=t.get(0,e).subType===B.Right,i=t.get(t.width-1,e).subType===B.Left;if(n&&i)return!1;for(var r=!0,o=0,s=0;s<t.width;s++){if(t.get(s,e).subType===B.BothHorizontal&&++o>=2){r=!1;break}}if(n||i||o>0)for(var a=1;a<t.width;a++){var h=t.get(a-1,e),u=t.get(a,e);if(h.subType==B.Left&&u.subType==B.Right){r=!1;break}}o>0&&(n||i)&&(r=!1);return r}(t,n);break;case B.Up:case B.Down:case B.BothVertical:i=function(t,e){var n=t.get(e,0).subType===B.Up,i=t.get(e,t.height-1).subType===B.Down;if(n&&i)return!1;for(var r=!0,o=0,s=0;s<t.height;s++){if(t.get(e,s).subType===B.BothVertical&&++o>=2){r=!1;break}}if(n||i||o>0)for(var a=1;a<t.height;a++){var h=t.get(e,a-1),u=t.get(e,a);if(h.subType==B.Up&&u.subType==B.Down){r=!1;break}}o>0&&(n||i)&&(r=!1);return r}(t,e);break;case B.LeftDown:case B.RightUp:case B.DoubleLeftDownRightUp:i=function(t,e,n){var i=new A(e,n),r=i.clone(),o=new A(1,1);for(;t.checkRange(i.sub(o));)i=i.sub(o);for(;t.checkRange(r.add(o));)r=r.add(o);var s=r.x-i.x+1,a=t.get(i).subType===B.RightUp,h=t.get(r).subType===B.LeftDown;if(a&&h)return!1;for(var u=0,c=!0,g=i.clone(),f=0;f<s;f++){if(t.get(g).subType===B.DoubleLeftDownRightUp&&++u>=2){c=!1;break}g=g.add(o)}if(a||h||u>0)for(var b=1;b<s;b++){var l=t.get(i.add(o.mul(b-1))),d=t.get(i.add(o.mul(b)));if(l.subType==B.LeftDown&&d.subType==B.RightUp){c=!1;break}}u>0&&(a||h)&&(c=!1);return c}(t,e,n);break;case B.LeftUp:case B.RightDown:case B.DoubleLeftUpRightDown:i=function(t,e,n){var i=new A(e,n),r=i.clone(),o=new A(1,-1);for(;t.checkRange(i.sub(o));)i=i.sub(o);for(;t.checkRange(r.add(o));)r=r.add(o);var s=r.x-i.x+1,a=t.get(i).subType===B.RightUp,h=t.get(r).subType===B.LeftDown;if(a&&h)return!1;for(var u=0,c=!0,g=i.clone(),f=0;f<s;f++){if(t.get(g).subType===B.DoubleLeftDownRightUp&&++u>=2){c=!1;break}g=g.add(o)}if(a||h||u>0)for(var b=1;b<s;b++){var l=t.get(i.add(o.mul(b-1))),d=t.get(i.add(o.mul(b)));l.subType==B.LeftDown&&d.subType==B.RightUp&&(c=!1)}u>0&&(a||h)&&(c=!1);return c}(t,e,n)}return i}(t,e,n)),t.get(e,n).subType=i,r}},F=function(t){return Math.floor(Math.random()*t)},S=function(t){Object(g.a)(n,t);var e=Object(f.a)(n);function n(t){var i;return Object(h.a)(this,n),(i=e.call(this,t)).grid=new C,i.difficulty=0,i.grid.resize(5,5),i.generateRandomMap(),i.state={lights:i.copyLightsFromGrid(),subTypes:i.copySubTypesFromGrid(),score:0,time:0},setInterval(i.increaseTime.bind(Object(c.a)(i)),1e3),i}return Object(u.a)(n,[{key:"increaseTime",value:function(){this.state.score>0&&this.setState(Object(a.a)(Object(a.a)({},this.state),{},{time:this.state.time+1}))}},{key:"generateRandomMap",value:function(){for(var t=0;t<this.grid.height;t++)for(var e=0;e<this.grid.width;e++){var n=Math.floor(14*Math.random());do{n=Math.floor(14*Math.random())}while(!M.CanPlace(this.grid,e,t,n));this.grid.get(e,t).subType=n}var i,r,o,s=(i=this.difficulty/100*13,r=1,o=13,Math.min(Math.max(i,r),o));this.randomClick(s)}},{key:"randomClick",value:function(t){for(var e=[],n=0;n<t;n++){var i=void 0;do{i=new A(F(this.grid.width),F(this.grid.height))}while(0===this.grid.get(i).subType||e.includes(i));this.grid.get(i).action(),e.push(i)}}},{key:"copyLightsFromGrid",value:function(){for(var t=new Array(this.grid.height),e=0;e<this.grid.height;e++){t[e]=new Array(this.grid.width);for(var n=0;n<this.grid.width;n++)t[e][n]=this.grid.get(n,e).isOn}return t}},{key:"copySubTypesFromGrid",value:function(){for(var t=new Array(this.grid.height),e=0;e<this.grid.height;e++){t[e]=new Array(this.grid.width);for(var n=0;n<this.grid.width;n++)t[e][n]=this.grid.get(n,e).subType}return t}},{key:"buttonAction",value:function(t,e){var n=this;this.grid.get(t,e).action();var i=this.copyLightsFromGrid();this.setState(Object(a.a)(Object(a.a)({},this.state),{},{lights:i})),0===this.grid.countLightButtons()&&setTimeout((function(){return n.clearMap()}),500)}},{key:"clearMap",value:function(){var t=this.state.score+100*(1+this.difficulty/10);this.difficulty++,this.generateRandomMap(),this.setState(Object(a.a)(Object(a.a)({},this.state),{},{score:t,subTypes:this.copySubTypesFromGrid(),lights:this.copyLightsFromGrid()}))}},{key:"render",value:function(){var t=this;return Object(b.jsxs)("div",{className:"window",children:[Object(b.jsxs)("div",{className:"window-title",children:["Toggle 98 Demo / Score: ",this.state.score," / Time: ",this.state.time,"s"]}),Object(b.jsxs)("div",{className:"window-content",children:[Object(b.jsx)("p",{children:"\ubaa8\ub4e0 \ubc84\ud2bc\uc744 \ub044\uc2ed\uc2dc\uc624. Turn off all buttons."}),Object(b.jsx)(k,{data:this.state,onButtonClick:function(e,n){return t.buttonAction(e,n)}})]})]})}}]),n}(r.a.Component),Z=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,o=e.getLCP,s=e.getTTFB;n(t),i(t),r(t),o(t),s(t)}))},G=n(9);n.n(G)()(),s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(S,{})}),document.getElementById("root")),Z()}},[[18,1,2]]]);