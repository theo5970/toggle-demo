(this["webpackJsonptoggle-toy"]=this["webpackJsonptoggle-toy"]||[]).push([[0],{17:function(t,e,i){},18:function(t,e,i){"use strict";i.r(e);var n=i(4),r=i.n(n),s=i(8),o=i.n(s),a=i(5),h=i(1),u=i(2),c=i(6),g=i(11),f=i(10),l=i(0),b=function(t,e){return t.subType===e.subType},d={0:{name:"OneArrow",transform:"scale(0,0)"},1:{name:"OneArrow",transform:"scale(1.0) rotateZ(-90deg)"},2:{name:"OneArrow",transform:"scale(1.0) rotateZ(90deg)"},3:{name:"OneArrow",transform:"scale(1.0) rotateZ(180deg)"},4:{name:"OneArrow",transform:"scale(1.0) rotateZ(0deg)"},5:{name:"OneArrow",transform:"scale(1.0) rotateZ(-135deg)"},6:{name:"OneArrow",transform:"scale(1.0) rotateZ(-45deg)"},7:{name:"OneArrow",transform:"scale(1.0) rotateZ(135deg)"},8:{name:"OneArrow",transform:"scale(1.0) rotateZ(45deg)"},9:{name:"TwoArrow",transform:"scale(1.0) "},10:{name:"TwoArrow",transform:"scale(1.0) rotateZ(90deg)"},11:{name:"FourArrow",transform:"scale(1.0) "},12:{name:"TwoArrow",transform:"scale(1.0) rotateZ(45deg)"},13:{name:"TwoArrow",transform:"scale(1.0) rotateZ(-45deg)"}};function y(t){var e=d[t.subType],i={transform:e.transform};return Object(l.jsx)("img",{src:"./Icons/".concat(e.name,".png"),alt:e.name,style:i})}var w=r.a.memo(y,b),v=function(t,e){return t.isOn===e.isOn&&t.subType===e.subType},p=new Audio("./Sounds/click.ogg"),k=function(t){var e=t.isOn?"on":"";return Object(l.jsx)("button",{className:e,onClick:function(){0!==t.subType&&(t.onClick(),p.play())},children:Object(l.jsx)(w,{subType:t.subType})})},m=r.a.memo(k,v);i(17);var O,j,T=function(t){var e=t.data.lights.slice().reverse(),i=t.data.subTypes;return Object(l.jsx)("table",{className:"toggle-grid",children:Object(l.jsx)("tbody",{children:e.map((function(n,r){return r=e.length-1-r,Object(l.jsx)("tr",{children:n.map((function(e,n){return Object(l.jsx)("td",{children:Object(l.jsx)(m,{isOn:e,subType:i[r][n],onClick:function(){return t.onButtonClick(n,r)}})},n)}))},r)}))})})},L=function(){function t(e){Object(h.a)(this,t),"number"===typeof e?(this.bytes=new Uint8Array(Math.ceil(e/8)),this.bitCount=e):e instanceof Uint8Array&&(this.bytes=new Uint8Array(e),this.bitCount=8*e.length)}return Object(u.a)(t,[{key:"length",get:function(){return this.bitCount}},{key:"copyTo",value:function(t){if(this.bytes.length>t.length)throw new Error("the length of destaination array is must be same or larger than BitArray bytes!");for(var e=0;e<this.bytes.length;e++)t[e]=this.bytes[e]}},{key:"get",value:function(t){var e=Math.floor(t/8),i=t%8;return 0!==(this.bytes[e]&1<<i)}},{key:"set",value:function(t,e){var i=Math.floor(t/8),n=t%8;e?this.bytes[i]|=1<<n:this.bytes[i]&=~(1<<n)}},{key:"toString",value:function(){for(var t=[],e=0;e<this.bytes.length;e++){for(var i=this.bytes[e],n=0;n<8&&!(8*e+n>=this.bitCount);n++){var r=i>>7&1;t.push(r),i<<=1}t.push(" ")}return t.join("")}}]),t}(),A=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){var e=t.grid;t.toggle();for(var i=0;i<e.width;i++)i!==t.pos.x&&e.get(i,t.pos.y).toggle();for(var n=0;n<e.height;n++)n!==t.pos.y&&e.get(t.pos.x,n).toggle()}}]),t}(),x=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){}}]),t}(),_=i(3),R=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(h.a)(this,t),this.x=e,this.y=i}return Object(u.a)(t,[{key:"set",value:function(e,i){e instanceof t?(this.x=e.x,this.y=e.y):(this.x=e,this.y=i)}},{key:"add",value:function(e,i){return e instanceof t?new t(this.x+e.x,this.y+e.y):new t(this.x+e,this.y+i)}},{key:"sub",value:function(e,i){return e instanceof t?new t(this.x-e.x,this.y-e.y):new t(this.x-e,this.y-i)}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e)}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"toString",value:function(){return"[".concat(this.x,", ").concat(this.y,"]")}}]),t}(),D=(O={},Object(_.a)(O,1,new R(0,1)),Object(_.a)(O,2,new R(0,-1)),Object(_.a)(O,3,new R(-1,0)),Object(_.a)(O,4,new R(1,0)),Object(_.a)(O,5,new R(-1,1)),Object(_.a)(O,6,new R(1,1)),Object(_.a)(O,7,new R(-1,-1)),Object(_.a)(O,8,new R(1,-1)),O),C=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){this.doOneArrow(t,D[t.subType])}},{key:"doOneArrow",value:function(t,e){for(var i=t.grid,n=t.pos.clone();i.checkRange(n);)i.get(n).toggle(),n=n.add(e)}}]),t}(),U=(j={},Object(_.a)(j,9,new R(1,0)),Object(_.a)(j,10,new R(0,1)),Object(_.a)(j,12,new R(-1,1)),Object(_.a)(j,13,new R(-1,-1)),j),B=function(){function t(){Object(h.a)(this,t)}return Object(u.a)(t,[{key:"onClick",value:function(t){this.doTwoArrow(t,U[t.subType])}},{key:"doTwoArrow",value:function(t,e){var i=t.grid,n=t.pos.clone();for(t.toggle(),n=n.add(e);i.checkRange(n);)i.get(n).toggle(),n=n.add(e);for(n.set(t.pos),n=n.sub(e);i.checkRange(n);)i.get(n).toggle(),n=n.sub(e)}}]),t}(),F=new(function(){function t(){Object(h.a)(this,t),this.nothing=new x,this.oneArrow=new C,this.twoArrow=new B,this.fourArrow=new A}return Object(u.a)(t,[{key:"Get",value:function(t){return 0===t?this.nothing:t>=1&&t<=8?this.oneArrow:11===t?this.fourArrow:t>=9&&t<=13?this.twoArrow:void 0}}]),t}()),M=function(){function t(e){Object(h.a)(this,t),this.pos=new R,this.isOn=!1,this.grid=e}return Object(u.a)(t,[{key:"subType",get:function(){return this._subType},set:function(t){this._subType=t,this.actionFunc=F.Get(t)}},{key:"toggle",value:function(){this.isOn=!this.isOn}},{key:"action",value:function(){this.actionFunc.onClick(this)}}]),t}(),S=function(){function t(){Object(h.a)(this,t),this._buttons=new Array,this._width=0,this._height=0}return Object(u.a)(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"totalButtons",get:function(){return this._width*this._height}},{key:"get",value:function(t,e){return"number"===typeof t?this._buttons[e*this._width+t]:this._buttons[t.y*this._width+t.x]}},{key:"checkRange",value:function(t,e){return"number"===typeof t?t>=0&&t<this._width&&e>=0&&e<this._height:t.x>=0&&t.x<this._width&&t.y>=0&&t.y<this._height}},{key:"resize",value:function(t,e){var i=this._width*this._height,n=t*e;this._width=t,this._height=e;var r=n-i;if(r>0)for(var s=0;s<r;s++)this._buttons.push(new M(this));else this._buttons.splice(this._buttons.length-r,r);this.reassignPositions()}},{key:"reassignPositions",value:function(){for(var t=0,e=0;e<this._height;e++)for(var i=0;i<this._width;i++){this._buttons[t].pos=new R(i,e),t++}}},{key:"visualize",value:function(){for(var t=[],e=this._height-1;e>=0;e--){for(var i=0;i<this._width;i++){var n=this.get(i,e).isOn;t.push(n?"O":"X"),t.push(" ")}t.push("\n")}return t.join("")}},{key:"toBitArray",value:function(){for(var t=new L(this.totalButtons),e=0;e<this._buttons.length;e++)t.set(e,this._buttons[e].isOn);return t}},{key:"fromBitArray",value:function(t){for(var e=0;e<t.length;e++)this._buttons[e].isOn=t.get(e)}},{key:"countLightButtons",value:function(){for(var t=0,e=0;e<this._buttons.length;e++)this._buttons[e].isOn&&t++;return t}},{key:"setAllState",value:function(t){for(var e=0;e<this._buttons.length;e++)this._buttons[e].isOn=t}}]),t}(),G={Up:1,Down:2,Left:3,Right:4,LeftUp:5,RightUp:6,LeftDown:7,RightDown:8,BothHorizontal:9,BothVertical:10,BothHorizontalVertical:11,DoubleLeftUpRightDown:12,DoubleLeftDownRightUp:13};var Z={CanPlace:function(t,e,i,n){var r=!0,s=t.get(e,i).subType;switch(t.get(e,i).subType=n,n){case G.Up:r=i!==t.height-1;break;case G.Down:r=0!==i;break;case G.Left:r=0!==e;break;case G.Right:r=e!==t.width-1;break;case G.LeftUp:r=0!==e&&i!==t.height-1;break;case G.RightUp:r=e!==t.width-1&&i!==t.height-1;break;case G.LeftDown:r=0!==e&&0!==i;break;case G.RightDown:r=e!==t.width-1&&0!==i;break;case G.DoubleLeftDownRightUp:r=!1===(e===t.width-1&&0===i),r&=!1===(0===e&&i===t.height-1);break;case G.DoubleLeftUpRightDown:r=!1===(0===e&&0===i),r&=!1===(e===t.width-1&&i===t.height-1);break;default:r=!0}return r&&(r&=function(t,e,i){var n=!0;switch(t.get(e,i).subType){case G.Left:case G.Right:case G.BothHorizontal:n=function(t,e){var i=t.get(0,e).subType===G.Right,n=t.get(t.width-1,e).subType===G.Left;if(i&&n)return!1;for(var r=!0,s=0,o=0;o<t.width;o++){if(t.get(o,e).subType===G.BothHorizontal&&++s>=2){r=!1;break}}if(i||n||s>0)for(var a=1;a<t.width;a++){var h=t.get(a-1,e),u=t.get(a,e);if(h.subType===G.Left&&u.subType===G.Right){r=!1;break}}s>0&&(i||n)&&(r=!1);return r}(t,i);break;case G.Up:case G.Down:case G.BothVertical:n=function(t,e){var i=t.get(e,0).subType===G.Up,n=t.get(e,t.height-1).subType===G.Down;if(i&&n)return!1;for(var r=!0,s=0,o=0;o<t.height;o++){if(t.get(e,o).subType===G.BothVertical&&++s>=2){r=!1;break}}if(i||n||s>0)for(var a=1;a<t.height;a++){var h=t.get(e,a-1),u=t.get(e,a);if(h.subType===G.Up&&u.subType===G.Down){r=!1;break}}s>0&&(i||n)&&(r=!1);return r}(t,e);break;case G.LeftDown:case G.RightUp:case G.DoubleLeftDownRightUp:n=function(t,e,i){var n=new R(e,i),r=n.clone(),s=new R(1,1);for(;t.checkRange(n.sub(s));)n=n.sub(s);for(;t.checkRange(r.add(s));)r=r.add(s);var o=r.x-n.x+1,a=t.get(n).subType===G.RightUp,h=t.get(r).subType===G.LeftDown;if(a&&h)return!1;for(var u=0,c=!0,g=n.clone(),f=0;f<o;f++){if(t.get(g).subType===G.DoubleLeftDownRightUp&&++u>=2){c=!1;break}g=g.add(s)}if(a||h||u>0)for(var l=1;l<o;l++){var b=t.get(n.add(s.mul(l-1))),d=t.get(n.add(s.mul(l)));if(b.subType===G.LeftDown&&d.subType===G.RightUp){c=!1;break}}u>0&&(a||h)&&(c=!1);return c}(t,e,i);break;case G.LeftUp:case G.RightDown:case G.DoubleLeftUpRightDown:n=function(t,e,i){var n=new R(e,i),r=n.clone(),s=new R(1,-1);for(;t.checkRange(n.sub(s));)n=n.sub(s);for(;t.checkRange(r.add(s));)r=r.add(s);var o=r.x-n.x+1,a=t.get(n).subType===G.RightDown,h=t.get(r).subType===G.LeftUp;if(a&&h)return!1;for(var u=0,c=!0,g=n.clone(),f=0;f<o;f++){if(t.get(g).subType===G.DoubleLeftDownRightUp&&++u>=2){c=!1;break}g=g.add(s)}if(a||h||u>0)for(var l=1;l<o;l++){var b=t.get(n.add(s.mul(l-1))),d=t.get(n.add(s.mul(l)));b.subType===G.LeftDown&&d.subType===G.RightUp&&(c=!1)}u>0&&(a||h)&&(c=!1);return c}(t,e,i);break;default:n=!0}return n}(t,e,i)),t.get(e,i).subType=s,r}},z=function(t){return Math.floor(Math.random()*t)},N=function(t){Object(g.a)(i,t);var e=Object(f.a)(i);function i(t){var n;return Object(h.a)(this,i),(n=e.call(this,t)).grid=new S,n.difficulty=0,n.isCleared=!1,n.clearedLevels=0,n.undoList=[],n.grid.resize(5,5),n.generateRandomMap(),n.state={lights:n.copyLightsFromGrid(),subTypes:n.copySubTypesFromGrid(),score:0,time:0},setInterval(n.increaseTime.bind(Object(c.a)(n)),1e3),n}return Object(u.a)(i,[{key:"increaseTime",value:function(){this.setState(Object(a.a)(Object(a.a)({},this.state),{},{time:this.state.time+1}))}},{key:"undo",value:function(){if(!(this.undoList.length<=0||!0===this.isCleared)){var t=this.undoList.pop();this.grid.fromBitArray(t),this.setState(Object(a.a)(Object(a.a)({},this.state),{},{lights:this.copyLightsFromGrid()}))}}},{key:"restart",value:function(){if(!(this.undoList.length<=0||!0===this.isCleared)){var t=this.undoList[0];this.grid.fromBitArray(t),this.undoList.length=0,this.setState(Object(a.a)(Object(a.a)({},this.state),{},{lights:this.copyLightsFromGrid()}))}}},{key:"generateRandomMap",value:function(){for(var t=0,e=0;e<this.grid.height;e++)for(var i=0;i<this.grid.width;i++){var n=Math.floor(14*Math.random());do{(n=Math.floor(14*Math.random()))===G.BothHorizontalVertical&&t++}while(!Z.CanPlace(this.grid,i,e,n)||n===G.BothHorizontalVertical&&t>=2);this.grid.get(i,e).subType=n}var r,s,o,a=Math.floor((r=3,s=12,o=this.difficulty/120,r+(s-r)*o));this.randomClick(a)}},{key:"randomClick",value:function(t){for(var e=this,i=[],n=function(t){var n=void 0;do{n=new R(z(e.grid.width),z(e.grid.height))}while(0===e.grid.get(n).subType||i.some((function(t){return t.x===n.x&&t.y===n.y})));e.grid.get(n).action(),i.push(n)},r=0;r<t;r++)n()}},{key:"copyLightsFromGrid",value:function(){for(var t=new Array(this.grid.height),e=0;e<this.grid.height;e++){t[e]=new Array(this.grid.width);for(var i=0;i<this.grid.width;i++)t[e][i]=this.grid.get(i,e).isOn}return t}},{key:"copySubTypesFromGrid",value:function(){for(var t=new Array(this.grid.height),e=0;e<this.grid.height;e++){t[e]=new Array(this.grid.width);for(var i=0;i<this.grid.width;i++)t[e][i]=this.grid.get(i,e).subType}return t}},{key:"buttonAction",value:function(t,e){var i=this;if(!0!==this.isCleared){this.undoList.push(this.grid.toBitArray()),this.grid.get(t,e).action();var n=this.copyLightsFromGrid();this.setState(Object(a.a)(Object(a.a)({},this.state),{},{lights:n})),0===this.grid.countLightButtons()&&(this.isCleared=!0,setTimeout((function(){return i.clearMap()}),300))}}},{key:"clearMap",value:function(){this.isCleared=!1;var t=this.state.score+100*(1+this.difficulty/10);this.difficulty++,this.clearedLevels++,this.undoList.length=0,this.generateRandomMap(),this.setState(Object(a.a)(Object(a.a)({},this.state),{},{score:t,subTypes:this.copySubTypesFromGrid(),lights:this.copyLightsFromGrid()}))}},{key:"render",value:function(){var t=this;return Object(l.jsxs)("div",{className:"window",children:[Object(l.jsxs)("div",{className:"window-title",children:["Toggle Demo (score=",this.state.score,", time=",this.state.time,"s, clear=",this.clearedLevels,")"]}),Object(l.jsxs)("div",{className:"window-content",children:[Object(l.jsx)("p",{children:"\ubaa8\ub4e0 \ubc84\ud2bc\uc744 \ub044\uc2ed\uc2dc\uc624. Turn off all buttons."}),Object(l.jsx)("button",{className:"btn",onClick:function(){return t.undo()},disabled:0===this.undoList.length,children:"Undo"}),Object(l.jsx)("button",{className:"btn",onClick:function(){return t.restart()},children:"Restart"}),Object(l.jsx)(T,{data:this.state,onButtonClick:function(e,i){return t.buttonAction(e,i)}})]})]})}}]),i}(r.a.Component),H=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,19)).then((function(e){var i=e.getCLS,n=e.getFID,r=e.getFCP,s=e.getLCP,o=e.getTTFB;i(t),n(t),r(t),s(t),o(t)}))},P=i(9);i.n(P)()(),o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),H()}},[[18,1,2]]]);